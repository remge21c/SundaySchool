# 회원가입 기능 테스트 가이드

> 교사 회원가입 기능 수동 테스트 가이드

**작성일**: 2026-01-13

---

## 테스트 환경

- **URL**: http://localhost:3000/signup
- **또는 배포 환경**: https://sunday-school-eta.vercel.app/signup

---

## 테스트 시나리오

### 1. 회원가입 페이지 접속

1. 브라우저에서 `/signup` 페이지 접속
2. 다음 요소가 표시되는지 확인:
   - 제목: "교사 회원가입"
   - 이메일 입력 필드
   - 비밀번호 입력 필드
   - 비밀번호 확인 입력 필드
   - 이름 입력 필드
   - "회원가입" 버튼
   - "로그인" 링크

**예상 결과**: 모든 필드와 버튼이 정상적으로 표시됨

---

### 2. 이메일 형식 검증 테스트

1. 이메일 필드에 `invalid-email` 입력
2. 나머지 필드 모두 입력 (비밀번호: `password123`, 비밀번호 확인: `password123`, 이름: `테스트`)
3. "회원가입" 버튼 클릭

**예상 결과**: 
- HTML5 이메일 검증으로 폼 제출이 차단되거나
- "올바른 이메일 형식을 입력해주세요." 에러 메시지 표시

---

### 3. 비밀번호 길이 검증 테스트

1. 이메일: `test@example.com`
2. 비밀번호: `123` (3자, 4자 미만)
3. 비밀번호 확인: `123`
4. 이름: `테스트`
5. "회원가입" 버튼 클릭

**예상 결과**: 
- HTML5 minlength 검증으로 폼 제출이 차단되거나
- "비밀번호는 4자 이상이어야 합니다." 에러 메시지 표시

---

### 4. 비밀번호 확인 불일치 테스트

1. 이메일: `test@example.com`
2. 비밀번호: `password123`
3. 비밀번호 확인: `password456` (다른 비밀번호)
4. 이름: `테스트`
5. "회원가입" 버튼 클릭

**예상 결과**: "비밀번호가 일치하지 않습니다." 에러 메시지 표시

---

### 5. 성공적인 회원가입 테스트

1. 이메일: `teacher1@example.com` (새로운 이메일)
2. 비밀번호: `password123`
3. 비밀번호 확인: `password123`
4. 이름: `김교사`
5. "회원가입" 버튼 클릭

**예상 결과**: 
- 회원가입 성공
- 자동으로 로그인됨
- 대시보드(`/dashboard`)로 리다이렉트됨
- Supabase `profiles` 테이블에 다음 정보가 자동 생성됨:
  - `id`: 사용자 UUID
  - `email`: `teacher1@example.com`
  - `role`: `teacher`
  - `full_name`: `김교사`

---

### 6. 중복 이메일 테스트

1. 위에서 생성한 이메일(`teacher1@example.com`)로 다시 회원가입 시도
2. 모든 필드 입력 후 "회원가입" 버튼 클릭

**예상 결과**: "이미 등록된 이메일입니다." 또는 유사한 에러 메시지 표시

---

### 7. 로그인 링크 테스트

1. 회원가입 페이지에서 "로그인" 링크 클릭

**예상 결과**: `/login` 페이지로 이동

---

## Supabase 확인 사항

회원가입 성공 후 Supabase 대시보드에서 확인:

### 1. Authentication → Users
- 새 사용자가 생성되었는지 확인
- 이메일이 올바르게 설정되었는지 확인

### 2. Table Editor → profiles
- `id`: Authentication의 사용자 UUID와 일치
- `email`: 입력한 이메일과 일치
- `role`: `teacher`로 자동 설정
- `full_name`: 입력한 이름과 일치
- `created_at`: 현재 시간으로 설정

---

## 문제 해결

### 회원가입 후 프로필이 생성되지 않는 경우

1. **트리거 확인**:
   - Supabase 대시보드 → Database → Functions
   - `handle_new_user` 함수가 존재하는지 확인
   - Supabase 대시보드 → Database → Triggers
   - `on_auth_user_created` 트리거가 활성화되어 있는지 확인

2. **수동 프로필 생성**:
   - Table Editor → profiles
   - Insert row
   - `id`: Authentication → Users에서 UUID 복사
   - `email`: 사용자 이메일
   - `role`: `teacher`
   - `full_name`: 사용자 이름

### 회원가입 후 로그인이 안 되는 경우

1. **프로필 확인**: 위의 "프로필이 생성되지 않는 경우" 참고
2. **세션 확인**: 브라우저 개발자 도구 → Application → Cookies
3. **에러 확인**: 브라우저 개발자 도구 → Console 탭

---

## 테스트 결과 기록

| 테스트 항목 | 결과 | 비고 |
|------------|------|------|
| 1. 페이지 접속 | ✅ / ❌ | |
| 2. 이메일 형식 검증 | ✅ / ❌ | |
| 3. 비밀번호 길이 검증 | ✅ / ❌ | |
| 4. 비밀번호 확인 불일치 | ✅ / ❌ | |
| 5. 성공적인 회원가입 | ✅ / ❌ | |
| 6. 중복 이메일 | ✅ / ❌ | |
| 7. 로그인 링크 | ✅ / ❌ | |
| Supabase 프로필 자동 생성 | ✅ / ❌ | |

---

## 다음 단계

회원가입 테스트 완료 후:

1. **파일럿 사용자 계정 생성**: 교사들이 직접 회원가입할 수 있도록 안내
2. **사용 가이드 업데이트**: 회원가입 방법 추가
3. **관리자 매뉴얼 업데이트**: 자동 계정 생성 방식 설명
