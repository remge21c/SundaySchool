# 파일럿 사용자 계정 생성 가이드

> 파일럿 테스트를 위한 교사 계정 생성 가이드

**작성일**: 2026-01-13

---

## 개요

파일럿 테스트를 위해 교사 계정 1-2개를 생성합니다.  
각 계정은 Supabase에서 생성하고, 프로필을 설정한 후 교사에게 안전하게 전달합니다.

---

## 사전 준비

### 필요한 정보

1. **교사 정보**
   - 이름
   - 이메일 주소
   - 담당 반 (선택사항)

2. **Supabase 접속 정보**
   - Supabase 대시보드 URL
   - 프로젝트 선택

---

## 단계별 가이드

### 1단계: Supabase 대시보드 접속

1. [Supabase 대시보드](https://app.supabase.com) 접속
2. 프로젝트 선택 (예: SundaySchool)

---

### 2단계: 사용자 생성 (Authentication)

1. 좌측 메뉴: **Authentication** → **Users**
2. **Add user** 버튼 클릭
3. **Create new user** 선택
4. 다음 정보 입력:
   - **Email**: 교사 이메일 주소 (예: `teacher1@example.com`)
   - **Password**: 임시 비밀번호 (6자 이상, 강력한 비밀번호 권장)
     - 예: `TempPass123!` (교사에게 전달 후 변경 권장)
   - **Auto Confirm User**: ✅ 체크 (이메일 인증 생략)
5. **Create user** 클릭
6. 생성된 사용자의 **UUID** 복사 (나중에 필요)

**참고**: 
- 임시 비밀번호는 안전하게 전달해야 합니다
- 첫 로그인 시 비밀번호 변경을 권장합니다 (향후 기능)

---

### 3단계: 프로필 생성 (profiles 테이블)

1. 좌측 메뉴: **Table Editor** → **profiles**
2. **Insert** → **Insert row** 클릭
3. 다음 정보 입력:
   - **id**: 2단계에서 복사한 사용자 UUID 붙여넣기
   - **email**: 교사 이메일 주소 (2단계와 동일)
   - **role**: `teacher` 선택 (드롭다운)
   - **full_name**: 교사 이름 (예: `김교사`)
   - **phone_number**: (선택사항)
   - **avatar_url**: (선택사항)
4. **Save** 클릭

**참고**:
- `role`은 반드시 `teacher` 또는 `admin`으로 설정해야 합니다
- `id`는 Authentication에서 생성한 사용자 UUID와 정확히 일치해야 합니다

---

### 4단계: 담당 반 연결 (선택사항)

교사가 특정 반을 담당하는 경우:

1. **Table Editor** → **classes** 테이블 열기
2. 담당 반 행 찾기
3. **main_teacher_id** 필드를 교사의 UUID로 업데이트
4. **Save** 클릭

**참고**:
- 담당 반을 설정하면 해당 반의 학생 정보만 조회/수정 가능합니다
- 담당 반을 설정하지 않으면 모든 반의 학생 정보를 조회할 수 없습니다

---

### 5단계: 로그인 테스트

1. 웹 애플리케이션 접속: https://sunday-school-eta.vercel.app/
2. **로그인** 페이지로 이동
3. 생성한 이메일과 비밀번호로 로그인 시도
4. 정상적으로 로그인되면 성공!

**문제 발생 시**:
- 이메일과 비밀번호를 다시 확인
- 프로필이 올바르게 생성되었는지 확인 (3단계)
- 브라우저 개발자 도구(F12) → Console 탭에서 에러 확인

---

### 6단계: 계정 정보 전달

교사에게 다음 정보를 안전하게 전달합니다:

**전달 방법** (안전한 채널 선택):
- 이메일 (암호화된 이메일 권장)
- 직접 전달
- 안전한 메신저

**전달 내용**:
```
안녕하세요.

주일학교 교적부 시스템 파일럿 테스트에 참여해 주셔서 감사합니다.

계정 정보:
- 시스템 URL: https://sunday-school-eta.vercel.app/
- 이메일: [교사 이메일]
- 임시 비밀번호: [임시 비밀번호]

첫 로그인 시:
1. 위 URL로 접속
2. 이메일과 임시 비밀번호로 로그인
3. 온보딩 튜토리얼이 자동으로 시작됩니다 (약 3분)

사용 가이드:
- [사용 가이드 링크 또는 첨부]

문의사항이 있으시면 언제든지 연락주세요.

감사합니다.
```

---

## 여러 계정 생성 시

위 단계를 반복하여 여러 교사 계정을 생성할 수 있습니다.

**팁**:
- 각 계정마다 고유한 이메일 주소 사용
- 임시 비밀번호는 각각 다르게 설정
- 계정 정보를 스프레드시트에 기록하여 관리

---

## 계정 정보 관리

### 계정 정보 기록 양식

| 번호 | 이름 | 이메일 | 비밀번호 | UUID | 담당 반 | 생성일 | 상태 |
|------|------|--------|----------|------|---------|--------|------|
| 1 | 김교사 | teacher1@example.com | TempPass123! | uuid-1 | 유년부 사랑반 | 2026-01-13 | 활성 |
| 2 | 이교사 | teacher2@example.com | TempPass456! | uuid-2 | 초등부 3학년 | 2026-01-13 | 활성 |

**주의**: 
- 이 정보는 안전하게 보관하세요
- 비밀번호는 암호화하여 저장하거나 별도로 관리하세요

---

## 문제 해결

### 로그인이 안 되는 경우

1. **계정 존재 확인**
   - Supabase 대시보드 → Authentication → Users
   - 이메일로 검색하여 계정이 있는지 확인

2. **프로필 확인**
   - Table Editor → profiles
   - 해당 UUID의 프로필이 있는지 확인
   - `role`이 `teacher` 또는 `admin`으로 설정되었는지 확인

3. **비밀번호 확인**
   - 비밀번호가 올바른지 다시 확인
   - 필요시 비밀번호 초기화 (Authentication → Users → Reset password)

### 데이터가 보이지 않는 경우

1. **담당 반 확인**
   - Table Editor → classes
   - `main_teacher_id`가 올바르게 설정되었는지 확인

2. **RLS 정책 확인**
   - Authentication → Policies
   - 필요한 정책이 활성화되어 있는지 확인

---

## 다음 단계

계정 생성 후:

1. **사용 가이드 전달**: `docs/user-guide.md` 검토 및 전달
2. **온보딩 확인**: 첫 로그인 시 튜토리얼이 정상 작동하는지 확인
3. **피드백 수집**: 사용 중 문제점이나 개선사항 수집

---

## 참고 문서

- **관리자 매뉴얼**: `docs/admin-manual.md`
- **사용 가이드**: `docs/user-guide.md`
- **계정 생성 가이드**: `docs/setup-admin-user.md`
