# 교사 회원가입 검증 가이드

> 교사 회원가입 기능 검증을 위한 상세 가이드

**검증 일시**: 2026-01-13  
**배포 URL**: https://sunday-school-eta.vercel.app/  

---

## 사전 준비

1. **테스트용 이메일 계정 준비**
   - 실제 이메일 주소 (이메일 인증 테스트용)
   - 또는 임시 이메일 서비스 사용 가능

2. **브라우저 준비**
   - Chrome 또는 Edge 권장
   - 개발자 도구(F12) 열기
   - Console 탭과 Network 탭 확인

3. **Supabase 대시보드 준비**
   - 프로필 자동 생성 확인용
   - Authentication → Users 탭
   - Table Editor → profiles 테이블

---

## 검증 항목

### 1. 회원가입 페이지 접근 확인

**URL**: https://sunday-school-eta.vercel.app/signup

#### 검증 단계

1. 회원가입 페이지 접속
   - 직접 URL 입력: https://sunday-school-eta.vercel.app/signup
   - 또는 로그인 페이지에서 "회원가입" 링크 클릭

2. 페이지 요소 확인

#### 예상 결과

- [ ] 회원가입 페이지 정상 로드
- [ ] "교사 회원가입" 제목 표시
- [ ] 다음 입력 필드 표시:
  - [ ] 이메일 입력 필드
  - [ ] 비밀번호 입력 필드
  - [ ] 비밀번호 확인 입력 필드
  - [ ] 이름 입력 필드
- [ ] "회원가입" 버튼 표시
- [ ] "로그인" 링크 표시
- [ ] 콘솔 에러 없음

---

### 2. 입력 필드 검증 확인

#### 검증 단계

1. 각 입력 필드에 잘못된 값 입력 테스트:
   - 이메일: 잘못된 형식 (예: "test")
   - 비밀번호: 4자 미만 (예: "123")
   - 비밀번호 확인: 비밀번호와 불일치
   - 이름: 빈 값
2. "회원가입" 버튼 클릭
3. 에러 메시지 확인

#### 예상 결과

- [ ] 이메일 형식 검증 작동
  - [ ] 잘못된 형식 시 에러 메시지: "올바른 이메일 형식을 입력해주세요."
- [ ] 비밀번호 길이 검증 작동
  - [ ] 4자 미만 시 에러 메시지: "비밀번호는 4자 이상이어야 합니다."
- [ ] 비밀번호 확인 검증 작동
  - [ ] 불일치 시 에러 메시지: "비밀번호가 일치하지 않습니다."
- [ ] 이름 필수 검증 작동
  - [ ] 빈 값 시 에러 메시지: "이름을 입력해주세요."

---

### 3. 정상 회원가입 확인

#### 검증 단계

1. 올바른 정보 입력:
   - 이메일: 유효한 이메일 주소 (예: `test-teacher@example.com`)
   - 비밀번호: 4자 이상 (예: `Test123!`)
   - 비밀번호 확인: 동일한 비밀번호
   - 이름: 교사 이름 (예: "테스트 교사")
2. "회원가입" 버튼 클릭
3. 대시보드로 리다이렉트 확인
4. Supabase에서 프로필 자동 생성 확인

#### 예상 결과

- [ ] 회원가입 성공
- [ ] 대시보드로 자동 리다이렉트 (`/dashboard`)
- [ ] 로그인 상태 유지
- [ ] Supabase Authentication → Users에 새 사용자 추가
  - [ ] 이메일 주소 확인
  - [ ] Auto Confirm 상태 확인 (이메일 인증 생략)
- [ ] Supabase Table Editor → profiles에 새 프로필 자동 생성
  - [ ] `id`: 사용자 UUID와 일치
  - [ ] `email`: 입력한 이메일과 일치
  - [ ] `full_name`: 입력한 이름과 일치
  - [ ] `role`: `teacher`로 자동 설정
  - [ ] `created_at`: 현재 시간

---

### 4. 중복 이메일 처리 확인

#### 검증 단계

1. 이미 존재하는 이메일로 회원가입 시도
2. 에러 메시지 확인

#### 예상 결과

- [ ] 중복 이메일 에러 메시지 표시
  - 예: "이미 사용 중인 이메일입니다." 또는 Supabase 에러 메시지
- [ ] 회원가입 실패
- [ ] 페이지에 머무름 (리다이렉트 없음)

---

### 5. 로그인 링크 확인

#### 검증 단계

1. 회원가입 페이지에서 "로그인" 링크 클릭
2. 로그인 페이지로 이동 확인

#### 예상 결과

- [ ] 로그인 페이지로 리다이렉트 (`/login`)
- [ ] 로그인 폼 정상 표시

---

### 6. 에러 처리 확인

#### 검증 단계

1. 네트워크 탭에서 요청 상태 확인
2. 콘솔 탭에서 에러 확인
3. 서버 에러 발생 시 에러 메시지 확인

#### 예상 결과

- [ ] 네트워크 요청 정상 (200 상태 코드)
- [ ] 콘솔 에러 없음
- [ ] 에러 발생 시 명확한 에러 메시지 표시
- [ ] 에러 메시지가 사용자에게 표시됨

---

## 검증 결과 기록

검증 완료 후 아래 형식으로 결과를 기록해 주세요:

### 회원가입 페이지 접근
- [ ] 회원가입 페이지 정상 로드
- [ ] 모든 입력 필드 표시
- [ ] "회원가입" 버튼 표시
- [ ] "로그인" 링크 표시
- [ ] 콘솔 에러 없음

### 입력 필드 검증
- [ ] 이메일 형식 검증 작동
- [ ] 비밀번호 길이 검증 작동
- [ ] 비밀번호 확인 검증 작동
- [ ] 이름 필수 검증 작동
- [ ] 에러 메시지 명확함

### 정상 회원가입
- [ ] 회원가입 성공
- [ ] 대시보드로 자동 리다이렉트
- [ ] 로그인 상태 유지
- [ ] Supabase Authentication에 사용자 추가
- [ ] Supabase profiles에 프로필 자동 생성
  - [ ] `role`: `teacher`로 자동 설정
  - [ ] `full_name`: 입력한 이름과 일치

### 중복 이메일 처리
- [ ] 중복 이메일 에러 메시지 표시
- [ ] 회원가입 실패
- [ ] 페이지에 머무름

### 로그인 링크
- [ ] 로그인 페이지로 리다이렉트
- [ ] 로그인 폼 정상 표시

### 에러 처리
- [ ] 네트워크 요청 정상
- [ ] 콘솔 에러 없음
- [ ] 에러 메시지 명확함

---

## 발견된 문제 기록

검증 중 발견된 문제가 있으면 아래 형식으로 기록해 주세요:

### 문제 1: (문제 제목)

**발견 일시**: YYYY-MM-DD  
**페이지**: 회원가입 페이지  
**증상**: (문제 설명)  
**재현 방법**: (재현 단계)  
**우선순위**: (높음/중간/낮음)  
**상태**: (미해결/해결 중/해결 완료)

---

## 참고

- **회원가입 페이지 URL**: https://sunday-school-eta.vercel.app/signup
- **로그인 페이지 URL**: https://sunday-school-eta.vercel.app/login
- **관련 문서**: 
  - `docs/pilot-user-setup.md` - 파일럿 사용자 계정 생성 가이드
  - `docs/user-guide.md` - 사용 가이드

---

## Supabase 프로필 자동 생성 확인 방법

1. **Supabase 대시보드 접속**
   - https://app.supabase.com
   - 프로젝트 선택

2. **Authentication → Users 확인**
   - 새로 생성된 사용자 확인
   - 이메일 주소 확인
   - UUID 복사

3. **Table Editor → profiles 확인**
   - 새 행 추가 확인
   - `id`가 사용자 UUID와 일치하는지 확인
   - `email`이 입력한 이메일과 일치하는지 확인
   - `full_name`이 입력한 이름과 일치하는지 확인
   - `role`이 `teacher`로 설정되었는지 확인
   - `created_at`이 현재 시간인지 확인

4. **트리거 확인 (선택사항)**
   - Database → Functions → `handle_new_user` 함수 확인
   - Database → Triggers → `on_auth_user_created` 트리거 확인
