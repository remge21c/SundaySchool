# í•™ë…„ë„ ì „í™˜ ì‹œìŠ¤í…œ ì„¤ê³„ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#ê°œìš”)
2. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì „ëµ](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„-ì „ëµ)
3. [ì—°ë§ ì „í™˜ í”„ë¡œì„¸ìŠ¤](#ì—°ë§-ì „í™˜-í”„ë¡œì„¸ìŠ¤)
4. [ë‹¬ë€íŠ¸ ì²˜ë¦¬ ì „ëµ](#ë‹¬ë€íŠ¸-ì²˜ë¦¬-ì „ëµ)
5. [ê³¼ê±° ë°ì´í„° ì¡°íšŒ](#ê³¼ê±°-ë°ì´í„°-ì¡°íšŒ)
6. [UI/UX ì„¤ê³„](#uiux-ì„¤ê³„)
7. [êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸](#êµ¬í˜„-ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## ê°œìš”

### í•µì‹¬ ê³¼ì œ
ì—°ë§/ì—°ì´ˆì— ë°œìƒí•˜ëŠ” ì£¼ìš” ë³€í™”:
- í•™ìƒì˜ í•™ë…„ ìƒìŠ¹ (ì˜ˆ: ì´ˆë“± 3í•™ë…„ â†’ 4í•™ë…„)
- ë°˜ ì¬í¸ì„± (ì˜ˆ: ì‚¬ë‘ë°˜ â†’ ë¯¿ìŒë°˜)
- ë¶€ì„œ ì´ë™ (ì˜ˆ: ìœ ë…„ë¶€ â†’ ì´ˆë“±ë¶€)
- ë‹´ë‹¹ êµì‚¬ ë³€ê²½

### í•µì‹¬ ì§ˆë¬¸
1. ê³¼ê±° ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë³´ì¡´í•  ê²ƒì¸ê°€?
2. ìƒˆ í•™ë…„ë„ ë°˜ í¸ì„±ì„ ì–´ë–»ê²Œ í•  ê²ƒì¸ê°€?
3. ë‹¬ë€íŠ¸ëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬í•  ê²ƒì¸ê°€?

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì „ëµ

### ì „ëµ: ì—°ë„ë³„ ìŠ¤ëƒ…ìƒ· ë°©ì‹ (ê¶Œì¥ â­)

ê³¼ê±° ë°ì´í„°ë¥¼ ì™„ì „íˆ ë³´ì¡´í•˜ë©´ì„œ ìƒˆ í•™ë…„ë„ë¡œ ê¹”ë”í•˜ê²Œ ì „í™˜í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

#### í•µì‹¬ í…Œì´ë¸” êµ¬ì¡°

**1. classes í…Œì´ë¸” (ì—°ë„ë³„ ë°˜ ê´€ë¦¬)**
```sql
CREATE TABLE classes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  department_id UUID REFERENCES departments(id),
  year INTEGER NOT NULL DEFAULT EXTRACT(YEAR FROM NOW()),
  main_teacher_id UUID REFERENCES profiles(id),
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- ê°™ì€ ì´ë¦„ì˜ ë°˜ì´ ì—°ë„ë³„ë¡œ ì¡´ì¬ ê°€ëŠ¥
  UNIQUE(name, department_id, year)
);

-- ì˜ˆì‹œ ë°ì´í„°:
-- id: abc-123, name: 'ì‚¬ë‘ë°˜', year: 2024, is_active: false
-- id: def-456, name: 'ì‚¬ë‘ë°˜', year: 2025, is_active: true
```

**2. class_assignments í…Œì´ë¸” (í•™ìƒ-ë°˜ ë§¤í•‘)**
```sql
CREATE TABLE class_assignments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  student_id UUID REFERENCES students(id) ON DELETE CASCADE,
  class_id UUID REFERENCES classes(id) ON DELETE CASCADE,
  year INTEGER NOT NULL,
  start_date DATE NOT NULL,
  end_date DATE, -- NULLì´ë©´ í˜„ì¬ ì†Œì†
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- í•œ í•™ìƒì€ ê°™ì€ ì—°ë„ì— í•˜ë‚˜ì˜ ë°˜ì—ë§Œ ì†í•¨
  UNIQUE(student_id, year)
);

CREATE INDEX idx_class_assignments_active 
  ON class_assignments(student_id) 
  WHERE end_date IS NULL;
```

**3. student_grade_history í…Œì´ë¸” (í•™ë…„ ì´ë ¥)**
```sql
CREATE TABLE student_grade_history (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  student_id UUID REFERENCES students(id) ON DELETE CASCADE,
  year INTEGER NOT NULL,
  grade INTEGER NOT NULL, -- í•™ë…„ (1~6)
  school_name TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(student_id, year)
);

-- students í…Œì´ë¸”ì˜ grade ì»¬ëŸ¼ì€ í˜„ì¬ í•™ë…„ë§Œ ì €ì¥
ALTER TABLE students 
  ADD COLUMN current_year INTEGER DEFAULT EXTRACT(YEAR FROM NOW());
```

**4. class_lineage í…Œì´ë¸” (ë°˜ ê³„ë³´ ì¶”ì )**
```sql
CREATE TABLE class_lineage (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  lineage_name TEXT NOT NULL UNIQUE, -- 'ì‚¬ë‘ë°˜-ê³„ë³´'
  description TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- classes í…Œì´ë¸”ì— ì™¸ë˜í‚¤ ì¶”ê°€
ALTER TABLE classes 
  ADD COLUMN lineage_id UUID REFERENCES class_lineage(id);
```

---

## ì—°ë§ ì „í™˜ í”„ë¡œì„¸ìŠ¤

### íƒ€ì„ë¼ì¸

| ì‹œê¸° | ì‘ì—… | ë‹´ë‹¹ | ì„¤ëª… |
|------|------|------|------|
| **11ì›” ë§** | ìƒˆ í•™ë…„ë„ ë°˜ ìƒì„± | ê´€ë¦¬ì | 2025ë…„ ë°˜ êµ¬ì¡° ë¯¸ë¦¬ ì„¤ê³„ |
| **12ì›” 1~3ì£¼** | ë°˜ í¸ì„± ì‹œë®¬ë ˆì´ì…˜ | êµì—­ì | ì„ì‹œ ë°°ì • í›„ ì¡°ì • |
| **12ì›” 4ì£¼** | ìµœì¢… í™•ì • | ê´€ë¦¬ì | í•™ìƒ/í•™ë¶€ëª¨ ê³µì§€ |
| **1ì›” 1ì¼** | ì‹œìŠ¤í…œ ì „í™˜ | ìë™ | end_date ì„¤ì • ë° ìƒˆ ë°°ì • í™œì„±í™” |
| **1ì›” 2ì£¼~** | ìƒˆ í•™ë…„ë„ ì‹œì‘ | êµì‚¬ | 2025ë…„ ë°ì´í„° ì¶•ì  ì‹œì‘ |

### Step 1: ìƒˆ í•™ë…„ë„ ë°˜ ìƒì„±

```typescript
// app/admin/year-transition/create-classes/page.tsx
async function createNextYearClasses() {
  const nextYear = new Date().getFullYear() + 1;
  
  // 1. í˜„ì¬ ì—°ë„ í™œì„± ë°˜ ì¡°íšŒ
  const { data: currentClasses } = await supabase
    .from('classes')
    .select('*')
    .eq('year', nextYear - 1)
    .eq('is_active', true);
  
  // 2. ìƒˆ ì—°ë„ ë°˜ ìë™ ìƒì„± (ì´ë¦„ ìœ ì§€)
  const newClasses = currentClasses.map(cls => ({
    name: cls.name,
    department_id: cls.department_id,
    year: nextYear,
    main_teacher_id: cls.main_teacher_id, // ì¼ë‹¨ ê°™ì€ êµì‚¬ ë°°ì •
    lineage_id: cls.lineage_id, // ê³„ë³´ ìœ ì§€
    is_active: false // ì•„ì§ í™œì„±í™” ì•ˆ í•¨
  }));
  
  await supabase.from('classes').insert(newClasses);
}
```

### Step 2: í•™ìƒ ë°˜ í¸ì„± (ë“œë˜ê·¸ ì•¤ ë“œë¡­)

```typescript
// app/admin/year-transition/assign-students/page.tsx
'use client';

export default function StudentAssignment() {
  const [students, setStudents] = useState([]);
  const [newClasses, setNewClasses] = useState([]);
  
  // ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ í•™ìƒì„ ìƒˆ ë°˜ì— ë°°ì •
  const handleDrop = async (studentId: string, newClassId: string) => {
    // ì„ì‹œ ë°°ì • í…Œì´ë¸”ì— ì €ì¥
    await supabase.from('temp_class_assignments').insert({
      student_id: studentId,
      class_id: newClassId,
      year: 2025
    });
  };
  
  return (
    <div className="grid grid-cols-2 gap-4">
      {/* ì™¼ìª½: í˜„ì¬ í•™ìƒ ëª©ë¡ */}
      <div>
        <h2 className="text-xl font-bold mb-4">2024ë…„ í•™ìƒ (í•™ë…„ë³„ ê·¸ë£¹)</h2>
        {students.map(student => (
          <StudentCard 
            key={student.id}
            student={student}
            draggable
          />
        ))}
      </div>
      
      {/* ì˜¤ë¥¸ìª½: ìƒˆ ë°˜ ëª©ë¡ */}
      <div>
        <h2 className="text-xl font-bold mb-4">2025ë…„ ë°˜ í¸ì„±</h2>
        {newClasses.map(cls => (
          <ClassDropZone
            key={cls.id}
            class={cls}
            onDrop={handleDrop}
          />
        ))}
      </div>
    </div>
  );
}
```

### Step 3: ìë™ ì „í™˜ ìŠ¤í¬ë¦½íŠ¸ (1ì›” 1ì¼ ì‹¤í–‰)

```typescript
// lib/cron/year-transition.ts
export async function executeYearTransition() {
  const currentYear = new Date().getFullYear();
  const lastYear = currentYear - 1;
  
  // 1. ì‘ë…„ ë°˜ ë¹„í™œì„±í™”
  await supabase
    .from('classes')
    .update({ is_active: false })
    .eq('year', lastYear);
  
  // 2. ì˜¬í•´ ë°˜ í™œì„±í™”
  await supabase
    .from('classes')
    .update({ is_active: true })
    .eq('year', currentYear);
  
  // 3. ì‘ë…„ í•™ìƒ ë°°ì • ì¢…ë£Œ (end_date ì„¤ì •)
  await supabase
    .from('class_assignments')
    .update({ end_date: `${lastYear}-12-31` })
    .eq('year', lastYear)
    .is('end_date', null);
  
  // 4. ì„ì‹œ ë°°ì • â†’ ì‹¤ì œ ë°°ì •ìœ¼ë¡œ ì „í™˜
  const { data: tempAssignments } = await supabase
    .from('temp_class_assignments')
    .select('*')
    .eq('year', currentYear);
  
  await supabase.from('class_assignments').insert(
    tempAssignments.map(ta => ({
      student_id: ta.student_id,
      class_id: ta.class_id,
      year: currentYear,
      start_date: `${currentYear}-01-01`,
      end_date: null
    }))
  );
  
  // 5. í•™ìƒ í•™ë…„ ìë™ ìƒìŠ¹
  await supabase.rpc('increment_student_grades');
  
  // 6. í•™ë…„ ì´ë ¥ ê¸°ë¡
  const { data: students } = await supabase
    .from('students')
    .select('id, grade, school_name');
  
  await supabase.from('student_grade_history').insert(
    students.map(s => ({
      student_id: s.id,
      year: currentYear,
      grade: s.grade,
      school_name: s.school_name
    }))
  );
}
```

**Supabase Function (í•™ë…„ +1):**
```sql
CREATE OR REPLACE FUNCTION increment_student_grades()
RETURNS void AS $$
BEGIN
  -- ì´ˆë“± 6í•™ë…„ â†’ ì¤‘ë“±ë¶€ë¡œ ì´ë™ (ë³„ë„ ì²˜ë¦¬)
  UPDATE students
  SET grade = CASE
    WHEN grade < 6 THEN grade + 1
    WHEN grade = 6 THEN 1 -- ì¤‘1ë¡œ ë¦¬ì…‹
  END,
  current_year = EXTRACT(YEAR FROM NOW());
END;
$$ LANGUAGE plpgsql;
```

---

## ë‹¬ë€íŠ¸ ì²˜ë¦¬ ì „ëµ

### ì˜µì…˜ ë¹„êµ

| ì˜µì…˜ | ë°©ë²• | ì¥ì  | ë‹¨ì  |
|------|------|------|------|
| **ì™„ì „ ë¦¬ì…‹** | ëª¨ë“  ë‹¬ë€íŠ¸ 0ìœ¼ë¡œ | ì‹ ê·œìƒê³¼ ê³µí‰ | í•™ìƒ ë¶ˆë§Œ í¼ |
| **ì¼ë¶€ ì´ì›”** | 50% ì´ì›” | ì ˆì¶©ì•ˆ | êµ¬í˜„ ë³µì¡ |
| **ë°°ì§€ë§Œ ìœ ì§€** â­ | í¬ì¸íŠ¸ ë¦¬ì…‹, ë°°ì§€ ì˜êµ¬ ë³´ì¡´ | í˜•í‰ì„± + ë™ê¸°ë¶€ì—¬ | - |

### ê¶Œì¥: ë°°ì§€ë§Œ ìœ ì§€, í¬ì¸íŠ¸ ë¦¬ì…‹

```sql
-- ë°°ì§€ í…Œì´ë¸”ì€ ì—°ë„ ë¬´ê´€í•˜ê²Œ ì˜êµ¬ ë³´ì¡´
CREATE TABLE student_achievements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  student_id UUID REFERENCES students(id),
  badge_code TEXT NOT NULL, -- '4week_perfect_attendance'
  earned_at TIMESTAMPTZ NOT NULL,
  year INTEGER NOT NULL, -- ì–´ëŠ ì—°ë„ì— íšë“í–ˆëŠ”ì§€ ê¸°ë¡
  
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- í•™ìƒ í”„ë¡œí•„ì—ì„œ ì—­ëŒ€ ë°°ì§€ ì „ì²´ í‘œì‹œ
SELECT * FROM student_achievements 
WHERE student_id = 'xxx' 
ORDER BY earned_at DESC;
```

### ì¼ë¶€ ì´ì›” êµ¬í˜„ (ì„ íƒ)

```typescript
async function carryOverTalents() {
  const { data: students } = await supabase.from('students').select('id');
  
  for (const student of students) {
    // 1. 2024ë…„ ì´ ì”ì•¡ ê³„ì‚°
    const { data: balance2024 } = await supabase
      .from('talent_transactions')
      .select('amount')
      .eq('student_id', student.id)
      .gte('created_at', '2024-01-01')
      .lt('created_at', '2025-01-01');
    
    const total2024 = balance2024.reduce((sum, t) => sum + t.amount, 0);
    
    // 2. 50% ì´ì›” íŠ¸ëœì­ì…˜ ìƒì„±
    const carryOver = Math.floor(total2024 * 0.5);
    
    await supabase.from('talent_transactions').insert({
      student_id: student.id,
      amount: carryOver,
      category: 'year_carryover',
      description: '2024ë…„ ì”ì•¡ ì´ì›” (50%)',
      created_at: '2025-01-01'
    });
  }
}
```

---

## ê³¼ê±° ë°ì´í„° ì¡°íšŒ

### í•™ìƒë³„ ì—°ë„ë³„ ì¶œì„ë¥  ë¹„êµ

```sql
-- í•™ìƒë³„ ì—°ë„ë³„ ì¶œì„ë¥ 
SELECT 
  s.name,
  ca.year,
  c.name as class_name,
  COUNT(*) FILTER (WHERE al.status = 'present') * 100.0 / NULLIF(COUNT(*), 0) as attendance_rate
FROM students s
JOIN class_assignments ca ON s.id = ca.student_id
JOIN classes c ON ca.class_id = c.id
LEFT JOIN attendance_logs al ON al.student_id = s.id 
  AND EXTRACT(YEAR FROM al.date) = ca.year
WHERE s.id = 'student-id-here'
GROUP BY s.name, ca.year, c.name
ORDER BY ca.year;
```

### íŠ¹ì • ë°˜ì˜ ì—­ëŒ€ ì„±ê³¼ ì¡°íšŒ

```typescript
// ì‚¬ë‘ë°˜ ì—­ëŒ€ ê¸°ë¡
const classHistory = await supabase
  .from('classes')
  .select(`
    year,
    name,
    students:class_assignments(
      student:students(name),
      attendance_logs(status)
    )
  `)
  .eq('lineage_id', 'ì‚¬ë‘ë°˜-ê³„ë³´-ID')
  .order('year', { ascending: false });
```

### ë°˜ë³„ ì„±ê³¼ ì¶”ì´ ê·¸ë˜í”„

```typescript
// ì‚¬ë‘ë°˜ì˜ 5ë…„ê°„ í‰ê·  ì¶œì„ë¥ 
const performanceData = classHistory.data.map(yearData => ({
  year: yearData.year,
  attendance_rate: calculateAttendanceRate(yearData.students),
  student_count: yearData.students.length
}));

// ì°¨íŠ¸ í‘œì‹œ
<LineChart data={performanceData}>
  <XAxis dataKey="year" />
  <YAxis />
  <Line dataKey="attendance_rate" name="ì¶œì„ë¥ " />
</LineChart>
```

---

## UI/UX ì„¤ê³„

### 1. í•™ìƒ ëŒ€ì‹œë³´ë“œ - ì—°ë„ ì „í™˜ ì•ˆë‚´

```typescript
// 12ì›” ì¤‘ìˆœë¶€í„° í‘œì‹œë˜ëŠ” ë°°ë„ˆ
{currentMonth === 12 && (
  <Alert className="bg-blue-50 border-blue-200">
    <Sparkles className="h-4 w-4" />
    <AlertTitle>ìƒˆ í•™ë…„ë„ ì¤€ë¹„ ì¤‘!</AlertTitle>
    <AlertDescription>
      2025ë…„ 1ì›” 1ì¼ë¶€í„° ìƒˆë¡œìš´ ë°˜ì— ë°°ì •ë©ë‹ˆë‹¤.
      <br />
      í˜„ì¬ ë‹¬ë€íŠ¸: {currentTalents}ê°œ â†’ ì´ì›” ì˜ˆì •: {carryOverTalents}ê°œ
      <br />
      <strong>12ì›” 31ì¼ê¹Œì§€ ë‹¬ë€íŠ¸ ëŒ€ì²­ì‚° ì´ë²¤íŠ¸ê°€ ì§„í–‰ë©ë‹ˆë‹¤!</strong>
    </AlertDescription>
  </Alert>
)}
```

### 2. ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - ì „í™˜ ì§„í–‰ ìƒí™©

```typescript
export default function TransitionDashboard() {
  const [progress, setProgress] = useState({
    classesCreated: false,
    assignmentProgress: 0,
    confirmed: false,
    executed: false
  });
  
  return (
    <Card>
      <CardHeader>
        <CardTitle>2024â†’2025 í•™ë…„ë„ ì „í™˜ ëŒ€ì‹œë³´ë“œ</CardTitle>
      </CardHeader>
      <CardContent className="space-y-4">
        <div>
          <div className="flex items-center gap-2">
            {progress.classesCreated ? (
              <CheckCircle className="text-green-500" />
            ) : (
              <Circle className="text-gray-300" />
            )}
            <span>1ë‹¨ê³„: ìƒˆ í•™ë…„ë„ ë°˜ ìƒì„±</span>
          </div>
        </div>
        
        <div>
          <div className="flex items-center gap-2">
            {progress.assignmentProgress > 0 ? (
              <Loader className="text-blue-500 animate-spin" />
            ) : (
              <Circle className="text-gray-300" />
            )}
            <span>2ë‹¨ê³„: í•™ìƒ ë°˜ í¸ì„± (ì§„í–‰ ì¤‘ {progress.assignmentProgress}%)</span>
          </div>
          <Progress value={progress.assignmentProgress} className="mt-2" />
        </div>
        
        <div>
          <div className="flex items-center gap-2">
            {progress.confirmed ? (
              <CheckCircle className="text-green-500" />
            ) : (
              <Clock className="text-gray-400" />
            )}
            <span>3ë‹¨ê³„: ìµœì¢… í™•ì • (ì˜ˆì •ì¼: 2024-12-25)</span>
          </div>
        </div>
        
        <div>
          <div className="flex items-center gap-2">
            <Clock className="text-gray-400" />
            <span>4ë‹¨ê³„: ìë™ ì „í™˜ ì‹¤í–‰ (ì˜ˆì •ì¼: 2025-01-01 00:00)</span>
          </div>
        </div>
      </CardContent>
      
      <CardFooter className="gap-2">
        <Button variant="outline">ë¯¸ë°°ì • í•™ìƒ ë³´ê¸°</Button>
        <Button variant="destructive">ì „í™˜ ì·¨ì†Œ</Button>
      </CardFooter>
    </Card>
  );
}
```

### 3. í•™ìƒ í”„ë¡œí•„ - ì—°ë„ë³„ íƒ­

```typescript
export default function StudentProfile({ studentId }) {
  const [selectedYear, setSelectedYear] = useState(2025);
  
  return (
    <div>
      <Tabs value={selectedYear.toString()} onValueChange={(v) => setSelectedYear(parseInt(v))}>
        <TabsList>
          <TabsTrigger value="2025">2025ë…„</TabsTrigger>
          <TabsTrigger value="2024">2024ë…„</TabsTrigger>
          <TabsTrigger value="2023">2023ë…„</TabsTrigger>
        </TabsList>
        
        <TabsContent value={selectedYear.toString()}>
          <Card>
            <CardHeader>
              <CardTitle>{selectedYear}ë…„ ì •ë³´</CardTitle>
            </CardHeader>
            <CardContent>
              <StudentYearData studentId={studentId} year={selectedYear} />
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>
      
      {/* ì „ì²´ ì´ë ¥ íƒ€ì„ë¼ì¸ */}
      <Card className="mt-4">
        <CardHeader>
          <CardTitle>ì „ì²´ ì´ë ¥ íƒ€ì„ë¼ì¸</CardTitle>
        </CardHeader>
        <CardContent>
          <StudentTimeline studentId={studentId} />
        </CardContent>
      </Card>
    </div>
  );
}
```

---

## êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°ì´í„°ë² ì´ìŠ¤
- [ ] `classes` í…Œì´ë¸”ì— `year`, `is_active` ì»¬ëŸ¼ ì¶”ê°€
- [ ] `class_assignments` í…Œì´ë¸” ìƒì„± (ë‹¤ëŒ€ë‹¤)
- [ ] `student_grade_history` í…Œì´ë¸” ìƒì„±
- [ ] `temp_class_assignments` ì„ì‹œ í…Œì´ë¸” ìƒì„±
- [ ] `class_lineage` í…Œì´ë¸” ìƒì„± (ì„ íƒ)
- [ ] `increment_student_grades()` SQL í•¨ìˆ˜ ì‘ì„±
- [ ] ì¸ë±ìŠ¤ ì¶”ê°€ (ì„±ëŠ¥ ìµœì í™”)

### ê´€ë¦¬ì ê¸°ëŠ¥
- [ ] ìƒˆ í•™ë…„ë„ ë°˜ ìƒì„± í˜ì´ì§€
- [ ] í•™ìƒ ë°˜ í¸ì„± ë“œë˜ê·¸ ì•¤ ë“œë¡­ UI
- [ ] ì „í™˜ ì§„í–‰ ìƒí™© ëŒ€ì‹œë³´ë“œ
- [ ] ë¯¸ë°°ì • í•™ìƒ ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] ìµœì¢… í™•ì • ë²„íŠ¼ ë° í™•ì¸ ëª¨ë‹¬

### ìë™í™”
- [ ] 1ì›” 1ì¼ 0ì‹œ ìë™ ì „í™˜ Cron Job (Supabase Edge Functions)
- [ ] 12ì›” 1ì¼ ê´€ë¦¬ì ì•Œë¦¼ (ì „í™˜ ì¤€ë¹„ ì‹œì‘)
- [ ] 12ì›” 25ì¼ ìµœì¢… í™•ì • ì•Œë¦¼
- [ ] ì „í™˜ ì‹¤íŒ¨ ì‹œ ë¡¤ë°± ë¡œì§

### í•™ìƒ/í•™ë¶€ëª¨ ì•ˆë‚´
- [ ] 12ì›” ì¤‘ìˆœ ë°°ë„ˆ í‘œì‹œ (ìƒˆ ë°˜ ë°°ì • ì•ˆë‚´)
- [ ] 12ì›” ë§ ë‹¬ë€íŠ¸ ëŒ€ì²­ì‚° ì´ë²¤íŠ¸ ì•Œë¦¼
- [ ] 1ì›” 1ì¼ ìƒˆ í•™ë…„ë„ ì¶•í•˜ í‘¸ì‹œ ì•Œë¦¼
- [ ] ì´ë©”ì¼/SMS ê³µì§€ ê¸°ëŠ¥

### ì˜ˆì™¸ ì²˜ë¦¬
- [ ] ì „í•™/í‡´ì› í•™ìƒ ìë™ ì¢…ë£Œ ì²˜ë¦¬
- [ ] ì‹ ê·œ ì „ì… í•™ìƒ (í•™ê¸° ì¤‘) ì²˜ë¦¬
- [ ] ë¶€ì„œ ì´ë™ (6í•™ë…„ â†’ ì¤‘1) ìë™í™”
- [ ] ë¯¸ë°°ì • í•™ìƒ ê²½ê³  ë° í• ë‹¹ UI

---

## ì„±ëŠ¥ ìµœì í™”

### ì¸ë±ìŠ¤ ì¶”ê°€
```sql
-- í˜„ì¬ ì—°ë„ ë°ì´í„°ë§Œ ë¹ ë¥´ê²Œ ì¡°íšŒ
CREATE INDEX idx_classes_active 
  ON classes(year, is_active) 
  WHERE is_active = true;

CREATE INDEX idx_class_assignments_current
  ON class_assignments(student_id, class_id)
  WHERE end_date IS NULL;

-- ì—°ë„ë³„ ì¡°íšŒ ìµœì í™”
CREATE INDEX idx_classes_year ON classes(year);
CREATE INDEX idx_class_assignments_year ON class_assignments(year);
```

### ì¿¼ë¦¬ ìµœì í™”
```typescript
// âœ… í˜„ì¬ í™œì„± ë°˜ë§Œ ì¡°íšŒ (ë§¤ìš° ë¹ ë¦„)
const activeClasses = await supabase
  .from('classes')
  .select('*')
  .eq('is_active', true); // â† ì¸ë±ìŠ¤ í™œìš©

// âŒ ëŠë¦° ì¿¼ë¦¬ (ì „ì²´ ìŠ¤ìº”)
const activeClasses = await supabase
  .from('classes')
  .select('*')
  .eq('year', currentYear)
  .eq('is_active', true);
```

---

## ì¥ê¸°ì  ì´ì 

ì´ ì„¤ê³„ë¥¼ ì‚¬ìš©í•˜ë©´:

1. âœ… **5ë…„ í›„ì—ë„ ë°ì´í„° ì™„ì „ ë³´ì¡´**
   - "ê¹€ì² ìˆ˜ í•™ìƒì´ 2020~2025ë…„ ë™ì•ˆ ì–´ëŠ ë°˜ì— ìˆì—ˆëŠ”ì§€" ì¶”ì  ê°€ëŠ¥
   
2. âœ… **êµì‚¬ ì¸ì‚¬ì´íŠ¸ ì œê³µ**
   - "ì‚¬ë‘ë°˜ì´ ì—­ëŒ€ ê°€ì¥ ì¶œì„ë¥ ì´ ë†’ì•˜ë˜ ì—°ë„ëŠ”?" ë¶„ì„ ê°€ëŠ¥
   
3. âœ… **í•™ë¶€ëª¨ ë§Œì¡±ë„ í–¥ìƒ**
   - "ìš°ë¦¬ ì•„ì´ê°€ ì£¼ì¼í•™êµ 5ë…„ ë™ì•ˆ ì–¼ë§ˆë‚˜ ì„±ì¥í–ˆëŠ”ì§€" ë¦¬í¬íŠ¸ ì œê³µ

4. âœ… **ê¹”ë”í•œ ì—°ë„ ì „í™˜**
   - ê´€ë¦¬ìê°€ í•œ ë²ˆì˜ í´ë¦­ìœ¼ë¡œ ìƒˆ í•™ë…„ë„ ì‹œì‘ ê°€ëŠ¥

5. âœ… **ê°ì‚¬ ì¶”ì  ìë™í™”**
   - ëˆ„ê°€ ì–¸ì œ ì–´ë–¤ ë°˜ì— ìˆì—ˆëŠ”ì§€ ìë™ ê¸°ë¡

---

## ê²°ë¡ 

**ì—°ë„ë³„ ìŠ¤ëƒ…ìƒ· ë°©ì‹**ì€:
- ê³¼ê±° ë°ì´í„°ë¥¼ ì™„ë²½íˆ ë³´ì¡´
- í†µê³„ ì¡°íšŒë¥¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¦
- ì—°ë„ ì „í™˜ì„ ìë™í™” ê°€ëŠ¥
- ì¥ê¸°ì ìœ¼ë¡œ ê°€ì¥ ì•ˆì •ì 

ë§¤ë…„ 12ì›”ì´ ë˜ì–´ë„ ë‹¹í™©í•˜ì§€ ì•Šê³  ì²´ê³„ì ìœ¼ë¡œ ìƒˆ í•™ë…„ë„ë¥¼ ì¤€ë¹„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!